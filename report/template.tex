%! Mode:: "TeX:UTF-8"
%! TEX program = xelatex
\PassOptionsToPackage{quiet}{xeCJK}
\documentclass[withoutpreface,bwprint]{cumcmthesis}
\usepackage{etoolbox}
\BeforeBeginEnvironment{tabular}{\zihao{-5}}
\usepackage[numbers,sort&compress]{natbib}  % 文献管理宏包
\usepackage[framemethod=TikZ]{mdframed}  % 框架宏包
\usepackage{url}  % 网页链接宏包
\usepackage{subcaption}  % 子图宏包
\usepackage{tabularx}  % 宽表格自适应
\usepackage{booktabs}  % \\toprule/\\midrule/\\bottomrule
\usepackage[table]{xcolor}  % 表格行配色与 \\rowcolors
\allowdisplaybreaks[4]
\newcolumntype{C}{>{\centering\arraybackslash}X}
\newcolumntype{R}{>{\raggedleft\arraybackslash}X}
\newcolumntype{L}{>{\raggedright\arraybackslash}X}

\title{基于模型预测控制(MPC)与遗传算法(GA)的网络切片分配优化}  % 论文标题
\tihao{}  % 题号
\baominghao{}  % 报名号
\schoolname{}  % 学校
\membera{}  % 队员a
\memberb{}  % 队员b
\memberc{}  % 队员c
\supervisor{}  % 指导老师
\yearinput{}
\monthinput{}
\dayinput{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 正文
\begin{document}

\maketitle
\input{abstract.tex}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\tableofcontents  % 目录
\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  
\section{问题重述}
\subsection{问题背景}
随着移动通信需求的激增和物联网的快速发展，网络架构正向异构化和虚拟化演进。异构蜂窝网络通过混合部署宏基站与微基站，有效提升了网络容量与覆盖。在此基础上，5G网络切片技术利用网络功能虚拟化，将单一物理网络划分为多个逻辑切片，以满足超高可靠低时延（URLLC）、增强移动宽带（eMBB）和大规模机器通信（mMTC）等多样化服务需求。

无线资源的管理依赖于正交频分多址接入技术，它将频谱划分为时频资源块（RB）进行灵活分配。因此，在异构网络与多切片共存的复杂场景下，如何设计高效的资源块和功率分配策略，以最大化用户服务质量并优化能耗，成为无线资源管理领域的核心挑战。

\subsection{问题要求}
本赛题旨在研究异构蜂窝网络中基于网络切片的无线资源管理问题。核心任务是设计一套优化方案，在满足不同用户多样化服务质量（QoS）需求的同时，实现系统资源的高效利用。具体来说，需要解决以下几个层层递进的问题：

\begin{itemize}
    \item \textbf{问题一：} 针对单个微基站和单一用户任务的场景，研究如何将有限的资源块在URLLC、eMBB、mMTC三类切片间进行静态分配，以实现用户服务质量的最大化。
    \item \textbf{问题二：} 在动态场景下，考虑用户任务的随机到达和用户移动性，设计一个多周期的资源分配策略。该策略需要在10个决策点上对资源进行重新分配，不仅要服务新到达的任务，还要处理队列中积压的任务，目标是最大化整个时间窗口内的总体用户服务质量。
    \item \textbf{问题三：} 将场景扩展到多个微基站，引入了基站间的同频干扰问题。要求在进行资源块分配的同时，对每个基站各切片的发射功率进行协同优化，以抑制干扰，最大化全系统的用户服务质量。
    \item \textbf{问题四：} 构建一个包含宏基站和多个微基站的异构网络模型。在此模型中，需要为每个用户决策其接入基站（宏基站或微基站），并为所有基站进行切片划分和功率控制，以应对更大规模的用户需求和更复杂的网络环境，最终目标仍是最大化整体服务质量。
    \item \textbf{问题五：} 在问题四的基础上，引入基站能耗模型，探讨在保证最大化用户服务质量的同时，如何通过优化资源分配策略来实现网络总能耗的最低化，从而在服务性能和绿色节能之间取得平衡。
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\subsection{我们的工作}
针对上述问题，我们设计并实现了一套从枚举、模型预测控制（MPC）到遗传算法（GA）和分层优化的渐进式算法框架，系统性地解决了从简单到复杂的无线网络切片资源管理难题，实现了服务质量与能源效率的有效平衡，本文的主要工作如图~\ref{fig:our_work}所示。
\begin{figure}[H]
    \centering
    \includegraphics[width=1\textwidth]{figures/3我们的工作.pdf}
    \caption{本文的主要工作流程与创新点概览}
    \label{fig:our_work}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\section{模型假设}
为简化问题，本文做出以下假设：

假设1：所有资源分配决策在每个100ms决策窗口的开始时刻一次性做出，并在此窗口持续时间内保持不变，简化复杂的动态问题。

假设2：一个基站的所有资源块全部划分，在用户在每种切片内部占用时可以浪费，减少资源分配的复杂性。

假设3：eMBB切片的服务质量（QoS）中传输速率的计算在一次任务的传输中取平均速率，简化计算复杂度。
    

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\section{符号说明}
\begin{table}[H]
\centering
\rowcolors{2}{white}{blue!5}
\begin{tabularx}{1\textwidth}{c C c}
\toprule
\textbf{符号} & \textbf{含义} & \textbf{单位} \\
\midrule
$R_n$ & 基站$n$的RB总数（MBS：$100$；SBS：$50$） & RB \\
$b$ & 单个RB带宽（$360$ kHz） & kHz \\
$v_s$ & 切片$s$内每用户占用的RB数（U/e/m为$10/5/2$） & RB \\
$x_{n,s}(t)$ & 基站$n$在窗口$t$为切片$s$分配的RB数 & RB \\
$p_{n,s}(t)$ & 基站$n$在窗口$t$对切片$s$的发射功率 & dBm \\
$\gamma_k(\tau)$ & 用户$k$在时刻$\tau$的信干噪比（SINR） & - \\
$r_k(\tau)$ & 用户$k$在时刻$\tau$的传输速率 & bps \\
$D_k$ & 用户$k$的任务数据量 & Mbit \\
$L_k^{s}$ & 用户$k$在切片$s$的总时延 & s \\
$Q_k(t)$ & 用户$k$在时刻$t$的队列积压量 & Mbit \\
$L_s^{\text{SLA}}$ & 切片$s$的时延SLA要求 & ms \\
$M_s$ & 切片$s$的任务丢失惩罚系数（$s\in\{U,e,m\}$） & - \\
$E_{total}(t)$ & 窗口$t$内全网总能耗 & J \\
\bottomrule
\multicolumn{3}{r}{\footnotesize 注：未列出的以及重复的符号均以首次出现处为准。} \\
\end{tabularx}
\end{table}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\input{q1.tex}
\input{q2.tex}
\input{q3.tex}
\input{q4.tex}
\input{q5.tex}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{模型的评价}

\subsection{模型的优点}
\begin{itemize}[itemindent=2em]
\item \textbf{递进式建模与求解：} 模型设计由简入繁，从单基站静态分配（问题一）逐步扩展到动态多周期（问题二）、多基站干扰（问题三）、异构网络（问题四）乃至能耗优化（问题五）。这种渐进式框架不仅清晰地展示了对问题复杂性的逐步掌控能力，也使得每个阶段的模型都能作为后续复杂模型的有效子集或基础。
\item \textbf{先进的混合优化框架：} 模型创新性地将模型预测控制（MPC）与遗传算法（GA）相结合。GA作为高效的启发式求解器，在处理多基站、多切片联合分配的组合爆炸问题时，能够快速收敛到高质量的次优解，兼顾了求解效率与方案质量。
\item \textbf{评估维度的全面性：} 评价体系综合考虑了URLLC、eMBB、mMTC三类切片差异化的服务质量（QoS）需求，涵盖了时延、速率、任务丢失率等关键指标。在问题五中，更进一步引入了基站能耗模型，实现了在保障QoS与优化网络能效间的权衡，模型评估维度全面，更贴近实际网络运营目标。
\end{itemize}

\subsection{模型的缺点}
\begin{itemize}[itemindent=2em]
\item \textbf{启发式算法的局限性：} 在处理复杂场景（问题三至五）时，模型核心求解器为遗传算法。作为一种启发式算法，GA虽然高效，但无法保证求得全局最优解，且算法性能对参数（如种群大小、交叉/变异率）的设置较为敏感，存在一定的寻优不确定性。
\item \textbf{环境模型的理想化假设：} 模型对信道状态和用户移动性的假设较为理想，例如信道衰减数据由预先给定的表格查阅而非实时动态变化，用户移动轨迹也是已知的。在真实网络中，信道和用户行为的随机性与不可预测性更强，这可能影响模型在实际部署中的性能表现。
\item \textbf{计算复杂度与实时性挑战：} 尽管采用了MPC与GA来提升效率，但在每个决策窗口内执行一次完整的“预测-优化”流程，尤其是在大规模网络场景下（问题四、五），计算开销依然较大。对于需要毫秒级响应的无线资源调度而言，该模型的实时性可能面临挑战。
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 参考文献
\nocite{*}
\bibliographystyle{gbt7714-numerical}  % 引用格式
\bibliography{ref.bib}  % bib源

\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 附录
\begin{appendices}
\section{文件列表}
\begin{table}[H]
\centering
\begin{tabularx}{\textwidth}{LL}
\toprule
文件名   & 功能描述 \\
\midrule
q1.py & 问题一：单基站枚举法求解器 \\
q2.py & 问题二：单微基站MPC滚动窗口求解器 \\
q3.py & 问题三：多基站GA-MPC求解器（同频干扰+功率控制） \\
q4.py & 问题四：异构网络GA-MPC求解器（MBS+SBS，接入受限） \\
q5.py & 问题五：能耗优化GA-MPC求解器（二阶段：功率优先+RB枚举） \\
$q1_enum_results.csv$ & 问题一求解结果 \\
$q2_enum_results_all.csv$ & 问题二求解结果 \\
$q3_window_results.csv$ & 问题三求解结果 \\
$q4_window_results.csv$ & 问题四求解结果 \\
$q5_window_results.csv$ & 问题五求解结果 \\
\bottomrule
\end{tabularx}
\label{tab:文件列表}
\end{table}

\section{代码}
q1.py
\lstinputlisting[language=python]{code2/q1_clean.py}
q2.py
\lstinputlisting[language=python]{code2/q2_clean.py}
q3.py
\lstinputlisting[language=python]{code2/q3_clean.py}
q4.py
\lstinputlisting[language=python]{code2/q4_clean.py}
q5.py
\lstinputlisting[language=python]{code2/q5_clean.py}

\section{求解结果}

\subsection{问题一：单基站枚举结果}
\begin{table}[H]
\centering
\caption{问题一最优RB分配方案}
\begin{tabular}{|c|c|c|c|c|c|c|}
\hline
$R_U$ & $R_E$ & $R_M$ & URLLC得分 & eMBB得分 & mMTC得分 & 目标函数 \\
\hline
10 & 10 & 30 & 1.98 & 3.80 & 10.00 & 15.77 \\
10 & 20 & 20 & 1.98 & 3.80 & 10.00 & 15.77 \\
10 & 30 & 10 & 1.98 & 3.80 & 10.00 & 15.77 \\
20 & 10 & 20 & 1.99 & 3.80 & 10.00 & 15.78 \\
20 & 20 & 10 & 1.99 & 3.80 & 10.00 & 15.78 \\
30 & 10 & 10 & 1.99 & 3.80 & 10.00 & 15.78 \\
\hline
\end{tabular}
\end{table}

\subsection{问题二：单微基站MPC滚动窗口最优决策}
\begin{table}[H]
\centering
\caption{问题二各窗口最优RB分配决策}
\begin{tabular}{|c|c|c|c|c|c|c|c|}
\hline
窗口 & $R_U$ & $R_E$ & $R_M$ & URLLC得分 & eMBB得分 & mMTC得分 & 目标函数 \\
\hline
0 & 10 & 20 & 20 & 22.75 & 32.74 & 10.00 & 65.49 \\
1 & 10 & 20 & 20 & 21.71 & 8.32 & 10.00 & 40.03 \\
2 & 10 & 20 & 20 & 23.61 & 5.23 & 10.00 & 38.83 \\
3 & 10 & 0 & 40 & 22.80 & 0.00 & 10.00 & 32.80 \\
4 & 40 & 0 & 10 & 21.85 & 0.00 & 10.00 & 31.85 \\
5 & 40 & 0 & 10 & 14.25 & 0.00 & 4.40 & 18.65 \\
6 & 40 & 0 & 10 & 17.10 & 0.00 & 7.10 & 24.20 \\
7 & 40 & 0 & 10 & 22.80 & 0.00 & 7.10 & 29.90 \\
8 & 40 & 0 & 10 & 21.85 & 0.00 & 10.00 & 31.85 \\
9 & 40 & 0 & 10 & 17.10 & 0.00 & 7.10 & 24.20 \\
\hline
\multicolumn{4}{|c|}{累计目标函数} & \multicolumn{3}{c|}{337.42} \\
\hline
\end{tabular}
\end{table}

\subsection{问题三：多基站GA-MPC优化结果}
\begin{table}[H]
\centering
\caption{问题三各窗口多基站资源分配结果}
\resizebox{\textwidth}{!}{
\begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|}
\hline
窗口 & BS1-RB分配 & BS1-功率(dBm) & BS2-RB分配 & BS2-功率(dBm) & BS3-RB分配 & BS3-功率(dBm) & URLLC & eMBB & mMTC & 目标 \\
\hline
0 & (0,40,10) & (24.4,22.8,24.8) & (20,0,30) & (21.6,22.9,23.4) & (20,0,30) & (21.6,22.9,21.7) & 38.16 & 8.40 & 30.00 & 76.56 \\
1 & (10,0,40) & (21.1,21.0,25.6) & (10,20,20) & (20.2,24.2,20.9) & (20,20,10) & (21.7,24.3,23.2) & 51.03 & 6.81 & 30.00 & 87.84 \\
2 & (10,0,40) & (21.9,20.1,25.1) & (0,40,10) & (18.9,25.4,22.7) & (20,0,30) & (20.5,24.8,21.0) & 38.35 & 9.87 & 30.00 & 78.22 \\
3 & (30,0,20) & (19.9,22.5,18.0) & (20,0,30) & (20.4,20.3,22.4) & (0,30,20) & (19.4,23.7,20.2) & 49.26 & 7.79 & 30.00 & 87.05 \\
4 & (10,20,20) & (23.2,26.2,24.0) & (30,0,20) & (21.6,20.7,21.6) & (10,0,40) & (20.5,21.8,22.2) & 46.43 & 5.90 & 30.00 & 82.33 \\
5 & (0,30,20) & (19.2,24.1,21.4) & (20,0,30) & (21.3,21.3,20.2) & (30,0,20) & (22.4,21.3,22.8) & 52.02 & 7.28 & 30.00 & 89.30 \\
6 & (10,0,40) & (21.9,21.3,20.6) & (10,0,40) & (22.5,21.5,22.7) & (20,20,10) & (21.3,25.5,21.0) & 52.08 & 6.25 & 30.00 & 88.33 \\
7 & (10,0,40) & (21.6,22.9,22.0) & (10,20,20) & (19.2,26.2,17.5) & (20,0,30) & (24.7,21.5,20.6) & 48.68 & 6.40 & 30.00 & 85.08 \\
8 & (20,0,30) & (22.5,18.6,22.9) & (20,0,30) & (18.7,17.9,23.3) & (10,20,20) & (22.3,29.8,23.0) & 51.45 & 7.59 & 30.00 & 89.04 \\
9 & (0,30,20) & (21.4,27.3,22.7) & (30,0,20) & (24.5,22.0,20.7) & (10,0,40) & (21.6,23.2,21.1) & 56.80 & 7.88 & 30.00 & 94.69 \\
\hline
\multicolumn{7}{|c|}{累计目标函数} & \multicolumn{3}{c|}{853.37} \\
\hline
\end{tabular}}
\end{table}

\subsection{问题四：异构网络GA-MPC优化结果}
\begin{table}[H]
\centering
\caption{问题四异构网络前5窗口资源分配结果}
\resizebox{\textwidth}{!}{
\begin{tabular}{|c|c|c|c|c|c|c|c|c|}
\hline
窗口 & MBS\_1-RB分配 & MBS\_1-功率(dBm) & SBS\_1-RB分配 & SBS\_2-RB分配 & SBS\_3-RB分配 & URLLC & eMBB & 目标 \\
\hline
0 & (30,40,30) & (25.1,23.8,24.6) & (20,20,10) & (20,0,30) & (20,0,30) & 93.42 & 14.26 & 147.68 \\
1 & (30,0,70) & (25.7,25.2,26.9) & (0,0,50) & (30,0,20) & (10,0,40) & 85.68 & 0.00 & 125.68 \\
2 & (50,0,50) & (25.8,24.1,22.9) & (0,0,50) & (0,0,50) & (10,0,40) & 64.61 & 0.00 & 104.61 \\
3 & (0,0,100) & (22.5,22.7,23.3) & (30,0,20) & (30,0,20) & (20,0,30) & 50.85 & 0.00 & 90.85 \\
4 & (0,0,100) & (24.9,24.8,27.8) & (0,0,50) & (30,0,20) & (20,0,30) & 43.16 & 0.00 & 83.16 \\
5 & (0,0,100) & (21.2,26.5,25.9) & (30,0,20) & (30,0,20) & (30,0,20) & 50.27 & 0.00 & 90.27 \\
6 & (0,0,100) & (22.0,29.6,22.4) & (20,0,30) & (30,0,20) & (20,0,30) & 47.51 & 0.00 & 87.51 \\
7 & (0,0,100) & (27.4,24.9,29.0) & (20,0,30) & (30,0,20) & (30,0,20) & 48.32 & 0.00 & 82.42 \\
8 & (0,0,100) & (23.2,22.8,26.9) & (10,0,40) & (20,0,30) & (0,0,50) & 19.48 & 0.00 & 29.50 \\
9 & (0,0,100) & (22.3,23.9,29.8) & (30,0,20) & (50,0,0) & (0,0,50) & 11.74 & 0.00 & -7.64 \\
\hline
\multicolumn{6}{|c|}{累计目标函数} & \multicolumn{2}{c|}{1041.28} \\
\hline
\end{tabular}}
\end{table}

\subsection{问题五：能耗优化GA-MPC结果}
\begin{table}[H]
\centering
\caption{问题五能耗优化结果（前5窗口）}
\resizebox{\textwidth}{!}{
\begin{tabular}{|c|c|c|c|c|c|c|c|c|c|}
\hline
窗口 & MBS\_1-RB & SBS\_1-RB & SBS\_2-RB & SBS\_3-RB & URLLC & eMBB & mMTC & 目标 & 能耗(J) \\
\hline
0 & (0,0,100) & (10,10,30) & (30,0,20) & (0,10,40) & 54.25 & 1.50 & 40.00 & 95.75 & 19.68 \\
1 & (0,0,100) & (0,0,50) & (30,0,20) & (0,0,50) & 35.11 & 0.00 & 37.03 & 72.13 & 18.10 \\
2 & (0,0,100) & (0,0,50) & (30,0,20) & (0,0,50) & 3.34 & 0.00 & 37.03 & 40.37 & 18.12 \\
3 & (0,0,100) & (0,0,50) & (20,0,30) & (0,0,50) & 52.88 & 0.00 & 40.00 & 92.88 & 18.25 \\
4 & (0,0,100) & (0,0,50) & (30,0,20) & (0,0,50) & 24.74 & 0.00 & 37.03 & 61.77 & 17.97 \\
5 & (0,0,100) & (0,0,50) & (30,0,20) & (0,0,50) & 46.51 & 0.00 & 37.03 & 83.54 & 18.10 \\
6 & (0,0,100) & (0,10,40) & (30,10,10) & (0,10,40) & 47.89 & -42.00 & 7.60 & 13.49 & 19.48 \\
7 & (0,0,100) & (0,0,50) & (30,0,20) & (0,0,50) & 36.74 & 0.00 & -33.10 & 3.64 & 18.09 \\
8 & (0,0,100) & (0,0,50) & (30,0,20) & (0,0,50) & 28.47 & 0.00 & -40.00 & -11.53 & 17.84 \\
9 & (0,0,100) & (0,0,50) & (30,0,20) & (0,0,50) & 16.55 & 0.00 & -40.00 & -23.45 & 18.05 \\
\hline
\multicolumn{5}{|c|}{累计目标函数} & \multicolumn{3}{c|}{381.17} & \multicolumn{1}{c|}{总能耗:183.68J} \\
\hline
\end{tabular}}
\end{table}



\end{appendices}
\end{document}
